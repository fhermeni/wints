function twoD(a){return 9>=a?"0"+a:a}function df(a){var c=new Date(Date.parse(a)),d=c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear();return d}Handlebars.getTemplate=function(a){return(void 0===Handlebars.templates||void 0===Handlebars.templates[a])&&$.ajax({url:"/static/tpls/"+a+".handlebars",success:function(b){void 0===Handlebars.templates&&(Handlebars.templates={}),Handlebars.templates[a]=Handlebars.compile(b)},async:!1}),Handlebars.templates[a]},Handlebars.registerHelper("fullname",function(a){return a.Firstname+" "+a.Lastname}),Handlebars.registerHelper("shortFullname",function(a){return name=a.Lastname+" "+a.Firstname,name.length>20&&(name=name.substring(0,17)+"..."),name}),Handlebars.registerHelper("len",function(a){return a.length}),Handlebars.registerHelper("company",function(a){return a.WWW&&""!=a.WWW?new Handlebars.SafeString("<a target='_blank' href='"+a.WWW+"'>"+a.Name+"</a>"):a.Name}),Handlebars.registerHelper("shortCompany",function(a){return n=a.Company,n.length>30&&(n=n.substring(0,27)+"..."),""!=a.CompanyWWW?new Handlebars.SafeString("<a target='_blank' href='"+a.CompanyWWW+"'>"+n+"</a>"):n}),Handlebars.registerHelper("date",function(a){return moment(a).format("D MMM YYYY")}),Handlebars.registerHelper("rawFullname",function(a){var b=a.Firstname+" "+a.Lastname;for(i=b.length;40>i;i++)b+=" ";return b}),Handlebars.registerHelper("raw",function(a){var b=a;for(i=a.length;60>i;i++)b+=" ";return b}),Handlebars.registerHelper("majorOptions",function(a){var b="";return a||(a="?"),allMajors.forEach(function(c){var d=a==c?" selected ":"";b+="<option value='"+c+"' "+d+" >"+c+"</option>"}),new Handlebars.SafeString(b)}),Handlebars.registerHelper("userSelecter",function(a){var b="";return a.forEach(function(a){b+="<option value='"+a.Email+"'>"+a.Firstname+" "+a.Lastname+"</option>"}),new Handlebars.SafeString(b)}),Handlebars.registerHelper("roleOptions",function(a){var b="",c=1;return["tutor","major","admin","root"].forEach(function(d){var e=c==a?" selected ":"";b+="<option value='"+c++ +"' "+e+" >"+d+"</option>"}),new Handlebars.SafeString(b)}),Handlebars.registerHelper("slot",function(a){return a}),Handlebars.registerHelper("majors",function(a){var b={};return a.forEach(function(a){a&&a.Major&&(b[a.Major]=!0)}),Object.keys(b).join(", ")}),Handlebars.registerHelper("commission",function(a){var b=[];return a.forEach(function(a){a?b.push(a.Firstname+" "+a.Lastname):b.push("?")}),b.join(", ")}),Handlebars.registerHelper("offset",function(a,b){var c=1e3*60*30*a,d=moment(b,"HH:mm"),e=new Date(d.toDate().getTime()+c),f=new Date(e.getTime()+18e5),g=twoD(e.getHours())+":"+twoD(e.getMinutes())+" - "+twoD(f.getHours())+":"+twoD(f.getMinutes());return g}),Handlebars.registerHelper("committeeOptions",function(a,c){return b="<option >?</option>",c.forEach(function(c){var d=c.Firstname+" "+c.Lastname,e=a==c.Email?" selected ":"";b+="<option "+e+" value='"+c.Email+"'>"+d+"</option>"}),new Handlebars.SafeString(b)}),Handlebars.registerHelper("inc",function(a){return a+1}),Handlebars.registerHelper("slotEntry",function(a){if(a){var b=a.P.Firstname+" "+a.P.Lastname+" ("+a.Major+")";return b+=" <span onclick='switchVisibility(this)' class='glyphicon glyphicon-eye-"+(defenses.private[a.P.Email]?"close late":"open")+"'></span>",b+=" <span onclick='switchVisio(this)' class='glyphicon "+(defenses.visio[a.P.Email]?"glyphicon-facetime-video":"glyphicon-user")+"'></span>",new Handlebars.SafeString(b)}return"Break"}),Handlebars.registerHelper("notEmptyJury",function(a){var b=!0;return a.students.forEach(function(a){return void 0!=a?(b=!1,!1):void 0}),b}),Handlebars.registerHelper("slotMajor",function(a){if(a){var b=getConvention(a);return b.Stu.Major}return"Break"}),Handlebars.registerHelper("slotDate",function(a){var b=moment(a,"DD/MM/YYYY HH:mm");return b.lang("fr"),b.format("dddd D MMMM")}),Handlebars.registerHelper("shortSlotEntry",function(a){if(e){var b=getConvention(e),c=b.Stu.P.Firstname+" "+b.Stu.P.Lastname;return c.length>30&&(c=c.substring(0,27)+"..."),c+" ("+a.Major+")"}return"Break"}),Handlebars.registerHelper("shortKind",function(a){return a.Kind.substring(0,3)}),Handlebars.registerHelper("reportStatus",function(a){var b=new Date(Date.parse(a.Deadline))<new Date,c="btn-link";return b&&(c=-2==a.Grade?"btn-warning":a.Grade<0?"btn-primary":a.Grade<10?"btn-danger":"btn-success"),c}),Handlebars.registerHelper("reportGrade",function(a){return-2==a.Grade?"-":-1==a.Grade?"?":a.Grade}),Handlebars.registerHelper("URIemails",function(a){var b=[];return a.forEach(function(a){a&&a.P&&b.push(a.P.Email)}),encodeURI(b.join(","))}),Handlebars.registerHelper("student",function(a){if(!a||0==a.length)return"break";var b=a.P.Firstname+" "+a.P.Lastname;defenses.private[a.P.Email]&&(b+=" <span class='glyphicon glyphicon-eye-close'></span>"),defenses.visio[a.P.Email]&&(b+=" <span class='glyphicon glyphicon-facetime-video'></span>");var c=getConvention(a.P.Email);return c.SupReport.IsIn||(b+=" <span class='glyphicon glyphicon-file alert-danger'></span>"),new Handlebars.SafeString(b)}),Handlebars.registerHelper("longDate",function(a){var b=moment(a,"DD/MM/YYYY");return b.lang("fr"),b.format("dddd D MMMM")});