<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Supervised students</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="css/flat-ui.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-2.1.0.min.js"></script>
    <script src="js/purl.js"></script>
    <script src="js/flatui-radio.js"></script>
    <script src="js/flatui-checkbox.js"></script>
    <script src="js/jquery.tagsinput.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-select.js"></script>
    <script src="js/common.js"></script>
    <script src="js/logout.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/conventions.js"></script>
    <script src="js/jquery.tablesorter.min.js"></script>
    <script src="js/mustache.js"></script>
    <script type="x-tmpl-mustache" id="row-my-conventions">
        <tr>
            <td>
                <label class='checkbox'>
                    <input type='checkbox' class='checkbox-mail-conventions' data-toggle='checkbox' value='{{email}}'/>
                </label>
            </td>

            <td><a href='#' onclick="showDetails('{{email}}')">{{student}}</a></td>
            <td>{{promotion}}</td>
            <td>{{major}}</td>
            <td><a href='mailto:{{sup.Email}}' title='{{sup.Firstname}} {{sup.Lastname}}'>{{supFullname}}</a></td>
            <td><a href='mailto:{{tutor.Email}}' title='{{tutor.Firstname}} {{tutor.Lastname}}'>{{tutorFullname}}</a></td>
            <td>{{midtermReport}}</td>
            <td>{{grade}}</td>
            <td>
                <span class='fui-new'></span> <span class='fui-chat'></span>
            </td>
        </tr>
    </script>
</head>
<body>
<div class="container">
    <nav class="navbar navbar-default navbar-embossed navbar-inverse" role="navigation">
        <div class="container-fluid">
            <div>
                <ul id="menu-pages" class="nav navbar-nav navbar-left">
                    <li><a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="fullname">Fullname</span><b class="caret"></b></a><span class="dropdown-arrow"></span>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#" onclick="showProfileEditor()"><span class="fui-new"></span> Edit profile</a></li>
                            <li><a onclick="logout()"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                        </ul>
                    </li>
                    <li class="tutorItem" style="display: none;"><a onclick="showPage(this, 'myStudents');">My students</a></li>
                    <li class="majorItem" style="display: none;"><a onclick="showPage(this, 'conventions');">Watchlist</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="majorItem adminItem" style="display: none">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">To align</span><b class="caret"></b></a><span class="dropdown-arrow"></span>
                        <ul class="dropdown-menu" role="menu">
                            <li class="adminItem" style="display: none;"><a onclick="showPage(undefined, 'pending')">Tutors</a></li>
                            <li class="rootItem" style="display: none;"><a onclick="showPage(undefined, 'majors')">Majors</a></li>
                        </ul>
                    </li>
                    <li class="adminItem" style="display: none">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fui-gear"></span><b class="caret"></b></a><span class="dropdown-arrow"></span>
                        <ul class="dropdown-menu" role="menu">
                            <li class="adminItem" style="display: none;"><a onclick="showPage(this, 'assignments')">Tutors</a></li>
                            <li class="rootItem" style="display: none;"><a onclick="showPage(this, 'privileges')">Permissions</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="page text-center" id="waiting" data-url="waiting">
        <div>
            <img src="img/spinner.gif" alt="spinner"/>
        </div>
        <h5>Loading data ...</h5>
    </div>

    <!-- the students I am supervising -->
    <div class="page" id="myStudents" data-url="myStudents" style="display: none">
    <h3>Tutored students</h3>

        <a id='btn-mail-myStudents' class="btn-sm btn-primary"><span class="fui-mail"></span> mail selection</a>
        <table class="table table-condensed table-hover tablesorter" id="table-myStudents">
            <thead>
                <tr>
                    <th rowspan="2"><label class='checkbox'><input id="general-checkbox-myStudents" type='checkbox' data-toggle='checkbox'/></label></th>
                    <th rowspan="2">Student</th>
                    <th rowspan="2">Promotion</th>
                    <th rowspan="2">Major</th>
                    <th rowspan="2">Company</th>
                    <th rowspan="2">Supervisor</th>
                    <th colspan="3">Midterm evaluation</th>
                </tr>
                <tr>
                    <th><small>due date</small></th>
                    <th><small>grade</small></th>
                    <th><small>resources</small></th>
                </tr>
            </thead>
            <tbody id="table-myStudents-body">
                <tr>
                    <td colspan="8" class="text-center">Loading ...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- list conventions -->
    <div class="page" id="conventions" data-url="conventions" style="display: none">
        <h3><span id="nb-conventions"></span> Internships</h3>
        <a id='btn-mail-conventions' class="btn-sm btn-primary"><span class="fui-mail"></span> mail selection</a>
        <table class="table table-condensed table-hover tablesorter" id="table-conventions">
            <thead>
                <tr>
                    <th rowspan="2"><label class='checkbox' id="general-checkbox-conventions"><input id="foo" type='checkbox' data-toggle='checkbox'/></label></th>
                    <th rowspan="2">Student</th>
                    <th rowspan="2">Promotion</th>
                    <th rowspan="2">Major</th>
                    <th rowspan="2">Supervisor</th>
                    <th rowspan="2">Tutor</th>
                    <th colspan="3">Midterm evaluation</th>
                </tr>
                <tr>
                    <th><small>due date</small></th>
                    <th><small>grade</small></th>
                    <th><small>resources</small></th>
                </tr>

            </thead>
            <tbody id="table-conventions-body">
                <tr>
                    <td colspan="7" class="text-center">Loading ...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="majors" data-url="majors" class="page" style="display: none">
        <h3>Students without a major</h3>
        <table class="table table-condensed table-hover" id="table-majors">
            <thead>
            <tr>
                <th>Student</th>
                <th>Promotion</th>
                <th>Major</th>
            </tr>
            </thead>
            <tbody id="table-majors-body">

            </tbody>
        </table>
    </div>


    <!-- pending page -->
    <div id="pending" data-url="pending" class="page" style="display: none">
        <div class="text-right">
            <small><span id="completed">NB</span>% completed</small>
        </div>
        <div class="progress">
            <div id="progress" class="progress-bar progress-bar-success" style="width: 0;"></div>
        </div>

        <div id="nothing">
            <h3 class="text-center">No conventions to align !</h3>
        </div>
        <div id="alignment-box">
            <div class="text-center">
                <h3 id="student"></h3>
                <span id="from"></span> to <span id="to"></span>: <a id="companyWWW"><span id="company"></span></a>
            </div>

            <div class="row">
                <div class="col-sm-5 col-lg-offset-1">
                    <h6>Tutor in the convention</h6>

                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="th-tutor-fn">Firstname</label>

                            <div class="col-sm-6">
                                <input type="text" class="input-sm form-control" id="th-tutor-fn">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="th-tutor-ln">Lastname</label>

                            <div class="col-sm-6">
                                <input type="text" class="input-sm form-control" id="th-tutor-ln">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="th-tutor-email">Email</label>

                            <div class="col-sm-6">
                                <input type="email" class="input-sm form-control" id="th-tutor-email">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="th-tutor-tel">Tel</label>

                            <div class="col-sm-6">
                                <input type="text" class="input-sm form-control" id="th-tutor-tel">
                            </div>
                        </div>
                    </form>
                    <div class="text-center">
                        <button class="btn-wide btn btn-lg text-center" onclick="pickTheory()">Choose</button>
                    </div>

                </div>
                <div class="col-sm-2 text-center">
                    <h1>OR</h1>
                </div>
                <div class="col-sm-4 text-center">
                    <h6>Available tutor(s)</h6>
                    <label for="known-tutor-selector"></label><select id="known-tutor-selector">
                    <option value="fabien.hermenier@unice.fr">Fabien Hermenier</option>
                </select>

                    <div class="">
                        <button id="btn-choose-known" class="btn-wide btn btn-lg text-center" onclick="pickKnown()">
                            Choose
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Students per tutor -->
    <div id="assignments" data-url="assignments" class="page" style="display: none">
        <h3><span id="nb-tutors"></span> Tutors</h3>
        <a id='btn-mail-tutors' class="btn-sm btn-primary"><span class="fui-mail"></span> mail selection</a>
        <table class="table-condensed table-hover tablesorter" id="table-assignments">
            <thead>
            <tr>
                <th><label class='checkbox'><input id="general-checkbox-tutors" type='checkbox' data-toggle='checkbox'/></label></th>
                <th>Tutor</th>
                <th>Count</th>
                <th>Students</th>
            </tr>
            </thead>
            <tbody id="table-assignments-body">
            <tr>
                <td colspan="4" class="text-center">Loading ...</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Privileges -->
    <div id="privileges" data-url="privileges" class="page" style="display: none">
    <h3>Permissions</h3>
        <div id="table-privileges-body"></div>
    </div>

<!-- the modals -->
    <div class="modal fade" id="profileEditor">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Profile editor</h4>
                </div>

                <div class="modal-body">

                    <div class="form-horizontal">
                        <div id="profileEditor-err"></div>
                        <div class="form-group">
                            <label for="lbl-firstname" class="col-sm-3 control-label">Firstname</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="lbl-firstname" placeholder="firstname"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="lbl-lastname" class="col-sm-3 control-label">Lastname</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="lbl-lastname" placeholder="lastname"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="lbl-tel" class="col-sm-3 control-label">Telephon</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="lbl-tel" placeholder="telephon"/>
                            </div>
                        </div>

                        <div class="text-right">
                            <button type="button" class="btn btn-success" onclick="updateProfile()">Update</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="student-details">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body form-horizontal">
                    <h3 id="infos-student-name"></h3>
                    <dl class="dl-horizontal">
                        <dt>Promotion</dt>
                        <dd id="infos-student-promotion"></dd>

                        <dt>Major</dt>
                        <dd>
                            <select id="infos-student-major"></select>
                        </dd>

                        <dt class="glyphicon glyphicon-earphone"></dt>
                        <dd id="infos-student-tel"></dd>
                    </dl>

                    <h5>Company: <small id="infos-company-name"></small></h5>
                    <dl class="dl-horizontal">
                        <dt>Period</dt>
                        <dd id="infos-company-period"></dd>

                        <dt>Midterm report</dt>
                        <dd id="infos-company-midterm"></dd>
                    </dl>

                    <h5>Supervisor: <small id="infos-sup-name"></small></h5>
                    <dl class="dl-horizontal">
                        <dt class="glyphicon glyphicon-earphone"></dt>
                        <dd id="infos-sup-tel"></dd>
                    </dl>

                    <h5>Tutor: <small id="infos-tutor-name"></small></h5>
                    <dl class="dl-horizontal">
                        <dt class="glyphicon glyphicon-earphone"></dt>
                        <dd id="infos-tutor-tel"></dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>
<footer>
    <div class="container">
        <p>© University Nice Sophia Antipolis 2013-2014</p>
    </div>
</footer>
</body>
</html>